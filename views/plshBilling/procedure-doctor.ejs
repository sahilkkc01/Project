<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>LifeLinkr</title>
    <%-include('../header')-%>
        <!-- main content start -->
        <div class="main-content">

            <div class="row content-top-gap2">
                <div class="col-lg-12">
                    <nav class="navbar navbar-expand-lg navbar-light bg-white">
                        <a class="navbar-brand text-center mr-5" href="#">
                            <span class="dash-icon"><i class="fas fa-tachometer-alt"></i></span>
                            Dashboard
                        </a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav">
                                <li class="nav-item active text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="far fa-user"></i></span>
                                        Master
                                    </a>
                                </li>
                                <li class="nav-item text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="fas fa-exchange-alt"></i></span>
                                        Transaction
                                    </a>
                                </li>
                                <li class="nav-item text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="fas fa-hand-holding-medical"></i></span>
                                        Patient 360
                                    </a>
                                </li>
                                <li class="nav-item text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="fas fa-receipt"></i></span>
                                        Outside Reciept
                                    </a>
                                </li>
                                <li class="nav-item text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="fas fa-file-invoice"></i></span>
                                        Outpatient Department
                                    </a>
                                </li>
                                <li class="nav-item text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="fas fa-chart-line"></i></span>
                                        Analytics
                                    </a>
                                </li>
                                <li class="nav-item text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="far fa-clock"></i></span>
                                        Waiting List
                                    </a>
                                </li>
                                <li class="nav-item text-center mr-5">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="fas fa-wrench"></i></span>
                                        Adminstration
                                    </a>
                                </li>
                                <li class="nav-item text-center">
                                    <a class="nav-link" href="#">
                                        <span class="dash-icon"><i class="fas fa-spinner"></i></span>
                                        Additional
                                    </a>
                                </li>

                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            <!-- content -->
            <div class="container-fluid">

                <div class="chart">
                    <div class="row">

                        <div class="col-lg-12 pl-lg-0 mt-2 ml-2">
                            <h4 class="primary">Procedure / Doctor</h4>
                        </div>

                        <div class="col-lg-12 pl-lg-2 chart-grid">
                            <form>
                                <div class="card card_border">
                                    <div class="">
                                        <!--Past your code here starts-->

                                        <div class="card">
                                            <div class="card-body pb-2 pt-0">

                                                <div class="pl-lg-0 pr-lg-0 mt-2">
                                                    <h6 class="primary">PATIENT INFORMATION</h6>
                                                </div>


                                                <div class="form-row">

                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <div class="form-row">
                                                            <div class="form-group col-8"><label class="input__label">MR
                                                                    No.</label><input name="mr_no" id="mr_no" type="number"  disabled
                                                                    class="form-control input-style" placeholder="">
                                                            </div>


                                                            <div class="form-group col-4 text-right"><button
                                                                    type="button"
                                                                    class="btn btn-style mt-4 btn-primary btn-style btn-change" data-bs-toggle="modal" data-bs-target="#myModal"><strong><i
                                                                            class="fas fa-search"></i>
                                                                        Search</strong></button>
                                                            </div>


                                                        </div>
                                                    </div>




                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <div class="form-group"><label class="input__label">First
                                                                Name</label><input name="first_name" type="text" id="first_name" disabled
                                                                class="form-control input-style" placeholder=""></div>
                                                    </div>

                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <div class="form-group"><label class="input__label">Middle
                                                                Name</label><input name="middle_name" type="text" id="middle_name" disabled
                                                                class="form-control input-style" placeholder=""></div>
                                                    </div>

                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <div class="form-group"><label class="input__label">Last
                                                                Name</label><input name="last_name" type="text" id="last_name" disabled
                                                                class="form-control input-style" placeholder=""></div>
                                                    </div>
                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <div class="form-group"><label
                                                                class="input__label">D.O.B.</label><input name="dob" id="dob" disabled
                                                                type="date" class="form-control input-style"
                                                                placeholder=""></div>
                                                    </div>
                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <label class="input__label">Age</label>
                                                        <div class="form-row">
                                                            <div class="form-group col-4">
                                                                <input name="dob" type="number" disabled
                                                                    class="form-control input-style" placeholder="">
                                                            </div>
                                                            <div class="form-group col-4">
                                                                <input name="dob" type="number" disabled
                                                                    class="form-control input-style" placeholder="">
                                                            </div>
                                                            <div class="form-group col-4">
                                                                <input name="dob" type="number" disabled
                                                                    class="form-control input-style" placeholder="">
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <div class="form-group"><label class="input__label">Gender
                                                            </label><select name="gender" class="form-control input-style" disabled id="gender">
                                                                <option value="">Select</option>
                                                                <option value="Male">Male</option>
                                                                <option value="Female">Female</option>
                                                                <option value="Other">Other</option>
                                                            </select>
                                                        </div>
                                                    </div>


                                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                        <label class="input__label">Mobile No.</label>
                                                        <div class="form-row">
                                                            <div class="form-group col-3">
                                                                <input name="mobileNo" type="number" disabled
                                                                    class="form-control input-style" placeholder="">
                                                            </div>
                                                            <div class="form-group col-9">
                                                                <input name="mobileNo" type="number" id="mobileNo" disabled
                                                                    class="form-control input-style" placeholder="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--Past your code here ends-->
                                    </div>
                                </div>
                                <div class="mt-1 col-lg-12 pl-lg-0 pr-lg-0 mt-3">
                                    <div class="card card_border">

                                        <div>
                                            <div class="form-group">
                                                <div class="col-xl-12 p-heading">
                                                    <h6 class="p-text">PROCEDURE DETAILS</h6>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-row">
                                            <div class="col-12 pl-lg-0 pr-lg-0">
                                                <div class="form-group">
                                                    <div class="col col-12 mt-3 mb-3 pr-lg-4 pl-lg-4">
                                                        <div class="slidx">

                                                            <table class="table2">

                                                                <thead>
                                                                    <tr>

                                                                        <th contenteditable="true">Date</th>
                                                                        <th contenteditable="true">Time</th>
                                                                        <th contenteditable="true">Bill Date</th>
                                                                        <th contenteditable="true">Bill No.</th>
                                                                        <th contenteditable="true">Procedure Name</th>
                                                                        <th contenteditable="true">Doctor Name</th>
                                                                        <th contenteditable="true">Nurse Name</th>
                                                                        <th contenteditable="true"></th>
                                                                        <th contenteditable="true"></th>
                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    <tr>

                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                    </tr>

                                                                    <tr>

                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                        <td contenteditable="true"> </td>
                                                                    </tr>
                                                                </tbody>

                                                            </table>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-1 col-lg-12 pl-lg-0 pr-lg-0 mt-3">
                                    <div class="card card_border">
                                        <div class="card-body pb-2 pt-2">

                                            <div class="form-row">


                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label
                                                            class="input__label">Date</label><input name="dob"
                                                            type="date" class="form-control input-style" placeholder="">
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label class="input__label">Bill
                                                            Date</label><input name="dob" type="date"
                                                            class="form-control input-style" placeholder=""></div>
                                                </div>


                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label
                                                            class="input__label">Time</label><input name="dob"
                                                            type="time" class="form-control input-style" placeholder="">
                                                    </div>
                                                </div>


                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-row">
                                                        <div class="form-group col-8"><label class="input__label">Bill
                                                                No.</label><input name="last name" type="number"
                                                                class="form-control input-style" placeholder="">
                                                        </div>


                                                        <div class="form-group col-4 text-right"><button type="button"
                                                                class="btn btn-style mt-4 btn-primary btn-style btn-change"><strong><i
                                                                        class="fas fa-search"></i>
                                                                    Search</strong></button>
                                                        </div>


                                                    </div>
                                                </div>
                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label class="input__label">Procedure

                                                        </label><select name="report_generated_by"
                                                            class="form-control input-style">
                                                            <option>Select</option>
                                                        </select></div>
                                                </div>
                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label class="input__label">Clinic

                                                        </label><select name="report_generated_by"
                                                            class="form-control input-style">
                                                            <option>Select</option>
                                                        </select></div>
                                                </div>


                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label class="input__label">Specialization

                                                        </label><select name="report_generated_by"
                                                            class="form-control input-style">
                                                            <option>Select</option>
                                                        </select></div>
                                                </div>



                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label class="input__label">Doctor Name

                                                        </label><select name="report_generated_by"
                                                            class="form-control input-style">
                                                            <option>Select</option>
                                                        </select></div>
                                                </div>

                                                <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                                    <div class="form-group"><label
                                                            class="input__label">Nurse</label><input name="last name"
                                                            type="text" class="form-control input-style" placeholder="">
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-4 col-sm-12 text-left">
                                                    <div class="form-group"><button type="button"
                                                            class="btn btn-style mt-4 btn-secondary btn-style btn-change"><strong><i
                                                                    class="fas fa-plus"></i>
                                                                Add</strong></button></div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <div class="form-group mt-1 mb-3 text-right">




                                    <button type="button" class="btn-danger btn-style btn mt-3"><strong><i
                                                class="fas fa-times"></i> Close</strong></button>




                                </div>
                            </form>
                        </div>

                        <!-- The Modal -->
  <div class="modal" id="myModal">
	<div class="modal-dialog  modal-xl">
	  <div class="modal-content">
  
		<!-- Modal Header -->
		<div class="modal-header">
			<a href="#" class="btn-close" data-bs-dismiss="modal"><i class="fa-solid fa-circle-xmark"></i></a>
		</div>
  
		<!-- Modal body -->
		<div class="modal-body">
			<form>
                <div class="card card_border">
                    <div class="">
                        <!--Past your code here starts-->

                        <div class="card">



                            <div class="card-body pb-2 pt-2">




                                <div class="form-row">


                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label class="input__label">First
                                                Name</label><input name="first name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>

                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label class="input__label">Middle
                                                Name</label><input name="first name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>

                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label
                                                class="input__label">Surname</label><input
                                                name="last name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>
                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label class="input__label">Family
                                                Name</label><input name="first name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>

                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label class="input__label">MR
                                                No.</label><input name="first name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>

                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label class="input__label">OPD
                                                No.</label><input name="last name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>
                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label class="input__label">Contact
                                                No.</label><input name="first name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>

                                    <div class="col-lg-3 col-md-4 col-sm-12 mb-2">
                                        <div class="form-group"><label class="input__label">Universal
                                                ID</label><input name="last name" type="text"
                                                class="form-control input-style" placeholder=""></div>
                                    </div>



                                </div>


                                <div class="form-group text-right">

                                    <button type="button"
                                        class="btn-primary btn-style btn btn-change mt-1"><strong><i
                                                class="fas fa-search"></i> Search</strong></button>

                                </div>

                            </div>

                            <div class="form-row">
                                <div class="col-12 pl-lg-0 pr-lg-0">
                                    <div class="form-group">
                                        <div class="col col-12 mt-1 mb-3 pr-lg-4 pl-lg-4">
                                            <div class="slidx">

                                                <table class="table2" id="patientTable">

                                                    <thead>
                                                        <tr>

                                                            <th contenteditable="true">MR No.</th>
                                                            <th contenteditable="true">Patient Name</th>
                                                            <th contenteditable="true">DOB</th>
                                                            <th contenteditable="true">Time</th>
                                                            <th contenteditable="true">Registration Date</th>
                                                            <th contenteditable="true">Mobile No.</th>
                                                            <th contenteditable="true">Gender</th>
                                                            <th contenteditable="true">Marital Status</th>
                                                            <th contenteditable="true">Universal ID</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="patientBody">
                                                    </tbody>

                                                </table>
                                            </div>
                                            <div id="paginationControls"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Past your code here ends-->
                    </div>
                </div>
                <div class="form-group mt-1 mb-3 text-right">

                    <button type="button" class="btn-danger btn-style btn mt-3 mr-2" id="myButton2" data-bs-dismiss="modal"><strong><i
                                class="fas fa-times"></i> Cancel</strong></button>

                    <button type="button" class="btn-primary btn-style btn mt-3" id="myButton1" data-bs-dismiss="modal"><strong><i
                                class="fas fa-check"></i> OK</strong></button>

                </div>

            </form>
		</div>
  
	  </div>
	</div>
  </div>
                        <!--footer section start-->
                        <%-include('../footer')-%>

                        <!-- <script type="module">

							import { validateForm } from '../javascripts/validation.js';
							import { myAjax } from '../javascripts/myAjax.js';
							import { pagi_search } from '../javascripts/pagi_search.js';
							
							$(document).ready(function () {
								console.log("Document is ready");
								let adv
								function fetchData() {
									$.ajax({
										url: '/plshBill/get-patient',
										type: 'GET',
										success: function (data) {
											
												console.log(data);
												
												data.reverse();
												console.log(data);
												let tableRows1 = '';
												data.forEach(function (item) {
													tableRows1 += `
													<tr data-mod-id="${item.id}">
														<td>${item.mr_no}</td>
														<td>${item.firstName} ${item.middleName} ${item.lastName}</td>
														<td>${item.dob}</td>
														<td>${item.createdAt}</td>
														<td>${item.date}</td>
														<td>${item.mobileNo}</td>
														<td>${item.spouse_gender}</td>
														<td>${item.spouse_marital_status}</td>
														<td>Universal ID</td>
													</tr>
													`;
                                                    

												});
	
												$('#patientBody').html(tableRows1);
												pagi_search('#searchBox', '#patientTable', '#paginationControls');
											
										},
										error: function (xhr, status, error) {
											console.error('Error fetching classification details:', error);
										}
									});
								}
								fetchData();
                            })
                            </script>
                            
                            <script type="module">
                                $('#patientTable').on('click', 'tr', function () {
                                    console.log("Satya");
                                    
                    // Remove 'locked' class from all rows and enable buttons
                    
                    console.log("Hello");
                    $('#item-body tr').removeClass('locked');
                    // ['#myButton1', '#myButton2'].forEach(selector => $(selector).removeAttr('disabled'));
                    $(this).addClass('locked');
                    const selectedRowText1 = $(this).find('td').eq(2).text();
                    const selectedRowText2 = $(this).find('td').eq(6).text();
                    console.log(selectedRowText1);
                    // console.log({ selector: '#first_name', value: selectedRowText1 });
                    $('#myButton1').on('click',function (){

                        [
                          { selector: '#first_name', value: selectedRowText1 },
                        //   { selector: '#packageAmount', value: selectedRowText2 },
    
                        ].forEach(field => $(field.selector).val(field.value).text(field.value));
                    })

                    // const itemId = $(this).data('mod-id');
                    // // FetchingDataBackend('schema',itemId);
                  });
                                
                            </script>
                            <script>
                                
                            </script> -->

                            <script type="module">

import { validateForm } from '../javascripts/validation.js';
            import { myAjax } from '../javascripts/myAjax.js';
            import { pagi_search } from '../javascripts/pagi_search.js';

            $(document).ready(function () {
                console.log("Document is ready");

                function fetchData() {
                    $.ajax({
                        url: '/plshBill/get-patient',
                        type: 'GET',
                        success: function (data) {
                            console.log(data);
                            data.reverse();
                            console.log(data);
                            let tableRows1 = '';
                            data.forEach(function (item) {
                                tableRows1 += `
                                    <tr data-mod-id="${item.id}">
                                        <td>${item.mr_no}</td>
                                        <td>${item.firstName} ${item.middleName} ${item.lastName}</td>
                                        <td>${item.dob}</td>
                                        <td>${item.createdAt}</td>
                                        <td>${item.date}</td>
                                        <td>${item.mobileNo}</td>
                                        <td>${item.spouse_gender}</td>
                                        <td>${item.spouse_marital_status}</td>
                                        <td>Universal ID</td>
                                    </tr>
                                `;
                            });

                            $('#patientBody').html(tableRows1);
                            pagi_search('#searchBox', '#patientTable', '#paginationControls');
                        },
                        error: function (xhr, status, error) {
                            console.error('Error fetching classification details:', error);
                        }
                    });
                }
                fetchData();

                // Event delegation for dynamically generated rows
                $('#patientTable').on('click', 'tr', function () {
                    console.log("Row clicked");

                    // Remove 'locked' class from all rows and enable buttons
                    $('#patientBody tr').removeClass('locked');
                    $(this).addClass('locked');

                    const selectedRowText6 = $(this).find('td').eq(0).text(); // Index 1 for Patient Name
                    console.log(selectedRowText6);
                    
                    const selectedRowText1 = $(this).find('td').eq(1).text(); // Index 1 for Patient Name
                    const nameArr=selectedRowText1.split(' ')
                    const selectedRowText2 = $(this).find('td').eq(2).text();
                    const selectedRowText3 = $(this).find('td').eq(3).text();
                    const selectedRowText = $(this).find('td').eq(6).text(); // Index 5 for Mobile No
                    const selectedRowText4 = $(this).find('td').eq(5).text(); // Index 5 for Mobile No
                    $('#myButton1').on('click', function () {
                        [
                            { selector: '#mr_no', value: nameArr[0] },
                            { selector: '#first_name', value: nameArr[0] },
                            { selector: '#middle_name', value: nameArr[1] },
                            { selector: '#last_name', value: nameArr[2] },
                            { selector: '#dob', value: selectedRowText2 },
                            { selector: '#gender', value: selectedRowText },
                            { selector: '#mobileNo', value: selectedRowText4 }
                        ].forEach(field => $(field.selector).val(field.value));
                        
                    });
                    // $('#myButton1').addClass('locked');
                });
            });
            </script>